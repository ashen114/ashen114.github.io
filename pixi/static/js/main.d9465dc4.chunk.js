(this["webpackJsonppixi-screen"]=this["webpackJsonppixi-screen"]||[]).push([[0],{24:function(t,e,i){},34:function(t,e,i){},35:function(t,e,i){},37:function(t,e,i){"use strict";i.r(e);var n=i(6),o=i.n(n),s=i(14),r=i.n(s),a=(i(24),i(19)),h=i(5),c=i(9),l=i(15),p=i(0),u=i(2),d=i(11),g=i.n(d),f=function t(e){var i=this;Object(l.a)(this,t),this.destroy=function(){i.aniIntervals.forEach((function(t){clearInterval(t)})),i.app.destroy(!0)},this.load=function(){var t=new p.Loader;t.add(i.resource.sprites).load((function(){i.loadDone()})),t.onStart.add((function(){})),t.onError.add((function(){})),t.onLoad.add((function(){})),t.onProgress.add((function(t){i.loadProgress(t)})),t.onComplete.add((function(){}))},this.loadProgress=function(t){i.trigger("loadProgress",t.progress)},this.loadDone=function(){i.initBg(),i.initTexts(),i.initSprites(),i.initTimeline(),i.initTouch(),i.trigger("loadDone")},this.on=function(t,e){i.callbacks[t]=i.callbacks[t]||[],i.callbacks[t].push(e)},this.off=function(t,e){var n=i.callbacks[t];if(n&&n instanceof Array){var o=n.indexOf(e);-1!==o&&n.splice(o,1)}},this.trigger=function(t,e){var n=i.callbacks[t];n&&n instanceof Array&&n.forEach((function(t){t(e)}))},this.initBg=function(){i.bg=new p.Container;var t=0;i.options.bgSprites.forEach((function(e){var n=new p.Sprite(p.utils.TextureCache[e]),o=i.app.screen.width/n.width;n.scale.x=o,n.scale.y=o,n.x=0,n.y=t,t+=n.height,i.bg.addChild(n)})),i.app.stage.addChild(i.bg),i.scrollHeight=i.bg.height-i.height},this.initTexts=function(){"object"===typeof i.options.texts&&Object.keys(i.options.texts).forEach((function(t){var e=i.options.texts[t],n=new p.Text(e.text,e.options);i.setAnchor(n,e.anchor),i.setPosition(n,e.position),e.link&&(n.interactive=!0,n.on("tap",(function(t){window.location.href=e.link}))),i.app.stage.addChild(n),i.texts[t]=n}))},this.initSprites=function(){"object"===typeof i.options.sprites&&Object.keys(i.options.sprites).forEach((function(t){var e=i.options.sprites[t],n=new p.Sprite(p.utils.TextureCache[e.key]);i.setSize(n,e.size),i.setAnchor(n,e.anchor),i.setPosition(n,e.position),i.app.stage.addChild(n),i.sprites[t]=n}))},this.setSize=function(t,e){if("widthFit"===e.mode){var n=i.app.screen.width*e.width/t.width;t.scale.x=n,t.scale.y=n}else if("heightFit"===e.mode){var o=i.app.screen.height*e.height/t.height;t.scale.x=o,t.scale.y=o}else t.width=e.width,t.height=e.height},this.setAnchor=function(t,e){if("string"===typeof e){var n=i.positionMap(e);t.anchor.x=n.x,t.anchor.y=n.y}else t.anchor.x=e.x,t.anchor.y=e.y},this.setPosition=function(t,e){"string"===typeof e&&(e=i.positionMap(e)),t.position.x=e.x*i.app.screen.width,t.position.y=e.y*i.app.screen.height},this.positionMap=function(t){return{top:{x:.5,y:0},right:{x:1,y:.5},bottom:{x:.5,y:1},left:{x:0,y:.5},topLeft:{x:0,y:0},topRight:{x:1,y:0},bottomLeft:{x:0,y:1},bottomRight:{x:1,y:1},center:{x:.5,y:.5}}[t]||{x:0,y:0}},this.initTimeline=function(){i.timeline=new u.a.timeline({paused:!0}),Object.keys(i.spritesAnimations).forEach((function(t){i.setAnimation(i.sprites[t],i.spritesAnimations[t])})),Object.keys(i.textsAnimations).forEach((function(t){i.setAnimation(i.texts[t],i.textsAnimations[t])}));var t=u.a.fromTo(i.bg,1,{y:0},{y:-i.scrollHeight}),e=new u.a.timeline;e.add(t,0),i.timeline.add(e,0)},this.setAnimation=function(t,e){t&&e&&e instanceof Array&&e.forEach((function(e){var n=e.from,o=e.to,s=e.frames,r=e.infinite,a=e.frameRate,h=e.delay,c=void 0===h?0:h,l=e.duration,d=void 0===l?1:l;if(s)r?(t.frames=s,t.currentFrame=0,i.aniIntervals.push(setInterval((function(){t.currentFrame+=1,t.currentFrame>=t.frames.length&&(t.currentFrame=0);var e=t.frames[t.currentFrame];t.texture=p.utils.TextureCache[e]}),1e3*d/a))):i.on("progress",(function(e){var i=(e-c)/d,n=Math.floor(i*s.length);if(n<s.length&&n>=0){var o=s[n];t.texture=p.utils.TextureCache[o]}}));else if(n||o){var g;n&&o?g=u.a.fromTo(t,d,n,o):o?g=u.a.to(t,d,o):n&&(g=u.a.from(t,d,n));var f=new u.a.timeline({delay:c});f.add(g,0),f.play(),o&&-1===o.repeat||i.timeline.add(f,0)}}))},this.initTouch=function(){var t=Object.assign({touch:"body"},i.options.touchOptions,{min:-i.bg.height+i.height,max:0,value:0,change:i.touchmove});i.alloyTouch=new g.a(t)},this.touchmove=function(t){i.progress=-t/i.scrollHeight,i.progress=i.progress<0?0:i.progress,i.progress=i.progress>1?1:i.progress,i.timeline.seek(i.progress),i.trigger("progress",i.progress)},this.lib={PIXI:p,gsap:u.a,AlloyTouch:g.a},this.callbacks={loadProgress:[]},this.options=e,this.container=e.container||document.body,this.width=e.width||window.innerWidth,this.height=e.height||window.innerHeight,this.scrollHeight=e.scrollHeight||0,this.resource=e.resource||{sprites:[]},this.spritesAnimations=this.options.spritesAnimations||{},this.textsAnimations=this.options.textsAnimations||{},this.autoLoad="undefined"===typeof e.autoLoad||e.autoLoad,this.sprites={},this.texts={},this.aniIntervals=[],this.app=new p.Application({resolution:2,transparent:!0,width:this.width,height:this.height}),this.container.appendChild(this.app.view),this.autoLoad&&this.load()},y=(i(34),i(35),i(3)),m=function(t){var e=t.progress;return Object(y.jsx)("div",{className:"container",children:Math.round(+e)})},x=2.38*window.innerHeight,w=function(){var t=function(){var t={sprites:[]};return t.sprites.push({name:"bg",url:"bg.png"},{name:"bg_1",url:"bg_1.png"},{name:"house",url:"house.png"},{name:"house_light",url:"house_light.png"},{name:"tree",url:"tree.png"},{name:"tree_light",url:"tree_light.png"}),t},e=function(){var t=[];return t.push("bg.png","bg_1.png"),t},i=function(){var t=function(t){return{delay:0,duration:1,from:{y:x-t},to:{y:-t}}};return{house:[{delay:.02,duration:.2,from:{alpha:1},to:{alpha:0}},Object(h.a)({},t(1080))],house_light:[{delay:.02,duration:.2,from:{alpha:0},to:{alpha:1}},Object(h.a)({},t(1080))],tree:[{delay:.2,duration:.3,from:{alpha:1},to:{alpha:0}},Object(h.a)({},t(-300))],tree_light:[{delay:.2,duration:.3,from:{alpha:0},to:{alpha:1}},Object(h.a)({},t(-300))]}},n=Object(c.useState)(0),o=Object(a.a)(n,2),s=o[0],r=o[1];return Object(c.useEffect)((function(){!function(){var n=new f({container:document.getElementById("home"),resource:t(),touchOptions:{touch:"#home",initialValue:0,sensitivity:.5,maxSpeed:.5},sprites:{house:{key:"house",size:{width:100,height:100},position:{x:.6,y:.5},anchor:"center"},house_light:{key:"house_light",size:{width:100,height:100},position:{x:.6,y:.5},anchor:"center"},tree:{key:"tree",size:{width:100,height:100},position:{x:.5,y:.5},anchor:"center"},tree_light:{key:"tree_light",size:{width:100,height:100},position:{x:.5,y:.5},anchor:"center"}},spritesAnimations:i(),texts:{first:{text:"first\u6587\u672c",position:{x:.5,y:.5},anchor:"center",options:{fontFamily:"Arial",fontSize:window.innerWidth/375*18,fill:16483135,align:"center"}},two:{text:"two\u6587\u672c",link:"https://www.baidu.com",position:{x:.5,y:.5},anchor:"center",options:{fontFamily:"Arial",fontSize:window.innerWidth/375*18,fill:754495,align:"center"}}},textsAnimations:{first:[{delay:0,duration:1,from:{y:.5*window.innerHeight},to:{repeat:-1,ease:"easeOut",y:.48*window.innerHeight}},{delay:0,duration:.1,to:{alpha:0}}],two:[{delay:0,duration:.3,from:{y:100,alpha:1},to:{y:0,alpha:0}}]},bgSprites:e()});n.on("loadProgress",(function(t){r(t)})),n.on("loadDone",(function(){})),n.on("progress",(function(t){}))}()}),[]),Object(y.jsx)("div",{id:"home",children:100!==s&&Object(y.jsx)(m,{progress:s})})},b=function(t){t&&t instanceof Function&&i.e(3).then(i.bind(null,38)).then((function(e){var i=e.getCLS,n=e.getFID,o=e.getFCP,s=e.getLCP,r=e.getTTFB;i(t),n(t),o(t),s(t),r(t)}))};r.a.render(Object(y.jsx)(o.a.StrictMode,{children:Object(y.jsx)(w,{})}),document.getElementById("root")),b()}},[[37,1,2]]]);
//# sourceMappingURL=main.d9465dc4.chunk.js.map